{"ast":null,"code":"var _jsxFileName = \"/Users/skout/Desktop/Auditi/auditi_frontend/src/components/Audiocard.js\";\nimport { Image, Card, Grid, Icon, Label, Button, Modal, Header } from 'semantic-ui-react';\nimport { connect } from 'react-redux';\nimport React, { useState } from 'react';\nimport Tags from './Tags';\nimport Pizzicato from 'pizzicato';\nimport Playcontroller from './Playcontroller.js';\nimport { confirmDelete, deleteAudiocard, editAudiocard, confirmEdit, favoriteAudiocard, confirmFavorite } from '../actions/myAudioCards';\n\nconst Audiocard = ({\n  audiocard,\n  confirmDelete,\n  deleteAudiocard,\n  editAudiocard,\n  confirmEdit,\n  favoriteAudiocard,\n  confirmFavorite\n}) => {\n  const [state, setState] = useState({\n    modalState: false,\n    sound: null,\n    playing: false,\n    paused: false,\n    playCount: 0,\n    loop: false\n  });\n  const [modalState, setModal] = useState(false);\n  let newDate = '';\n\n  if (audiocard.attributes.created_at) {\n    let convertDate = audiocard.attributes.created_at.split('T')[0].split('-');\n    newDate = new Date(convertDate).toDateString();\n  } //play on click\n\n\n  const playSound = () => {\n    console.log(\"PLAYING RECORDING\");\n    console.log(audiocard.attributes); //load sound if not played before\n\n    if (audiocard.attributes.sound_url && !state.sound) {\n      const getSound = new Pizzicato.Sound({\n        source: 'file',\n        options: {\n          path: audiocard.attributes.sound_url\n        }\n      }, () => {\n        getSound.play();\n        setState(prevState => ({ ...prevState,\n          sound: getSound,\n          playing: true\n        }));\n      });\n      getSound.on('end', () => {\n        console.log(\"ENDING\");\n        setState(prevState => ({ ...prevState,\n          playCount: prevState.playCount + 1\n        }));\n      });\n      return;\n    } //if resuming play (don't incrementing playCount)\n\n\n    console.log(state.sound.sourceNode.context.currentTime);\n    console.log(state.sound.sourceNode.buffer.duration);\n\n    if (!state.playing && state.sound && state.paused) {\n      state.sound.play();\n      setState({ ...state,\n        playing: true\n      });\n    } //if playing again, increment playCount\n\n\n    if (!state.playing && state.sound && !state.paused) {\n      state.sound.play();\n      setState(prevState => ({ ...prevState,\n        playing: true\n      }));\n    }\n  }; // Notes: play pause play \n  // play stop play\n\n\n  const pauseSound = () => {\n    console.log(\"PAUSING\");\n\n    if (state.playing) {\n      setState({ ...state,\n        playing: false,\n        paused: true\n      });\n      state.sound.pause();\n      console.log(state);\n    }\n  };\n\n  const handleLoop = () => {\n    console.log(\"LOOPING\");\n    state.sound.stop();\n    state.sound.loop ? state.sound.loop = false : state.sound.loop = true;\n    setState(prevState => ({ ...prevState,\n      loop: state.sound.loop\n    }));\n\n    if (state.sound.playing) {\n      state.sound.play();\n\n      state.sound.onended = () => {\n        console.log(\"ENDING LOOP\");\n        setState(prevState => ({ ...prevState,\n          playCount: prevState.playCount + 1\n        }));\n      };\n    }\n  };\n\n  const tags = JSON.parse(audiocard.attributes.tags);\n  const getTags = tags.map((tag, index) => /*#__PURE__*/React.createElement(Tags, {\n    tag: tag,\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }));\n\n  const handleDeleteClick = e => {\n    confirmDelete(audiocard.id);\n    deleteAudiocard(audiocard.id);\n    setModal(false);\n  };\n\n  const addColor = category => {\n    switch (category) {\n      case \"quotes\":\n        return \"#AECBDF\";\n\n      case \"music\":\n        return \"#B75FD6\";\n\n      case \"nature\":\n        return \"#AEDFC1\";\n\n      case \"personal\":\n        return \"#DFB3AE\";\n\n      case \"joke\":\n        return \"#C99EDB\";\n\n      case \"health\":\n        return \"#DA9333\";\n\n      default:\n        return \"#AEDFD5\";\n    }\n  };\n\n  const addIcon = category => {\n    switch (category) {\n      case \"quotes\":\n        return \"comment alternate\";\n\n      case \"music\":\n        return \"music\";\n\n      case \"nature\":\n        return \"leaf\";\n\n      case \"personal\":\n        return \"user secret\";\n\n      case \"joke\":\n        return \"smile\";\n\n      case \"health\":\n        return \"hand spock\";\n\n      default:\n        return \"find\";\n    }\n  };\n\n  const modifyCardContent = id => {\n    let oldHeader = audiocard.attributes.soundster;\n    let modifyCard = document.querySelector(`div.header.header-${id}`);\n    modifyCard.setAttribute('contenteditable', 'true');\n    let newHeader = modifyCard.innerHTML;\n\n    if (oldHeader !== newHeader) {\n      audiocard.attributes.soundster = newHeader;\n      confirmEdit(audiocard);\n      editAudiocard(audiocard);\n    }\n  };\n\n  const addFavorite = audiocard => {\n    let getIcon = document.querySelector(`a.ui.left.corner.label.icon-${audiocard.id}`).firstElementChild;\n    !getIcon.className.includes('pink') ? getIcon.className = 'pink bullhorn icon' : getIcon.className = 'bullhorn icon';\n\n    if (getIcon.className.includes('pink')) {\n      audiocard.attributes.favorite = true;\n      favoriteAudiocard(audiocard);\n      confirmFavorite(audiocard);\n    } else {\n      audiocard.attributes.favorite = false;\n      favoriteAudiocard(audiocard);\n      confirmFavorite(audiocard);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    color: \"olive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Icon.Group, {\n    size: \"huge\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    fluid: true,\n    src: audiocard.attributes.image,\n    label: {\n      as: 'a',\n      corner: 'left',\n      className: `icon-${audiocard.id}`,\n      icon: audiocard.attributes.favorite ? \"pink bullhorn\" : \"bullhorn\",\n      onClick: e => addFavorite(audiocard)\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Icon, {\n    corner: \"bottom right\",\n    inverted: true,\n    style: {\n      color: addColor(audiocard.attributes.category)\n    },\n    name: addIcon(audiocard.attributes.category),\n    size: \"large\",\n    id: \"category-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Icon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Playcontroller, {\n    playOrPause: state.playing ? pauseSound : playSound,\n    sound: state.sound,\n    playing: state.playing,\n    playCount: state.playCount,\n    id: audiocard.id,\n    loop: state.loop,\n    handleLoop: state.sound ? handleLoop : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Card.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    className: `header-${audiocard.id}`,\n    onClick: e => modifyCardContent(audiocard.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 25\n    }\n  }, audiocard.attributes.soundster), /*#__PURE__*/React.createElement(Card.Meta, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 29\n    }\n  }, \"Created on \", newDate))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"icon-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Card.Content, {\n    extra: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Row, {\n    column: 2,\n    className: \"tag-button-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 33\n    }\n  }, getTags)))), /*#__PURE__*/React.createElement(Label, {\n    corner: \"right\",\n    color: \"yellow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    dimmer: true,\n    trigger: /*#__PURE__*/React.createElement(Icon, {\n      name: \"times circle\",\n      className: \"deleteIcon\",\n      onClick: e => setModal(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 38\n      }\n    }),\n    open: modalState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"trash alternate outline\",\n    color: \"olive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 37\n    }\n  }), \"Are you sure you want to delete?\")), /*#__PURE__*/React.createElement(Modal.Actions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    id: \"delete-button\",\n    color: \"green\",\n    inverted: true,\n    onClick: e => handleDeleteClick(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"checkmark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 37\n    }\n  }), \" Yes\"), /*#__PURE__*/React.createElement(Button, {\n    id: \"delete-button\",\n    color: \"red\",\n    inverted: true,\n    onClick: e => setModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"checkmark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 37\n    }\n  }), \" No\")))));\n};\n\nexport default connect(null, {\n  confirmDelete,\n  deleteAudiocard,\n  editAudiocard,\n  confirmEdit,\n  favoriteAudiocard,\n  confirmFavorite\n})(Audiocard);","map":{"version":3,"sources":["/Users/skout/Desktop/Auditi/auditi_frontend/src/components/Audiocard.js"],"names":["Image","Card","Grid","Icon","Label","Button","Modal","Header","connect","React","useState","Tags","Pizzicato","Playcontroller","confirmDelete","deleteAudiocard","editAudiocard","confirmEdit","favoriteAudiocard","confirmFavorite","Audiocard","audiocard","state","setState","modalState","sound","playing","paused","playCount","loop","setModal","newDate","attributes","created_at","convertDate","split","Date","toDateString","playSound","console","log","sound_url","getSound","Sound","source","options","path","play","prevState","on","sourceNode","context","currentTime","buffer","duration","pauseSound","pause","handleLoop","stop","onended","tags","JSON","parse","getTags","map","tag","index","handleDeleteClick","e","id","addColor","category","addIcon","modifyCardContent","oldHeader","soundster","modifyCard","document","querySelector","setAttribute","newHeader","innerHTML","addFavorite","getIcon","firstElementChild","className","includes","favorite","image","as","corner","icon","onClick","color"],"mappings":"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","sourcesContent":["import { Image, Card, Grid, Icon, Label, Button, Modal, Header } from 'semantic-ui-react';\nimport { connect } from 'react-redux'\nimport React, {useState} from 'react'\nimport Tags from './Tags'\nimport Pizzicato from 'pizzicato'\nimport Playcontroller from './Playcontroller.js'\nimport {confirmDelete, deleteAudiocard, editAudiocard, confirmEdit, favoriteAudiocard, confirmFavorite} from '../actions/myAudioCards'\n\nconst Audiocard = ({audiocard, confirmDelete, deleteAudiocard, editAudiocard, confirmEdit, favoriteAudiocard, confirmFavorite}) => {\n    \n    const [state, setState] = useState({\n        modalState: false,\n        sound: null,\n        playing: false,\n        paused: false,\n        playCount: 0,\n        loop: false\n    })\n    const [modalState, setModal] = useState(false)\n\n    let newDate = ''\n    if (audiocard.attributes.created_at){\n        let convertDate = audiocard.attributes.created_at.split('T')[0].split('-')\n        newDate = new Date(convertDate).toDateString()\n    }\n\n    //play on click\n    const playSound = () => {\n        console.log(\"PLAYING RECORDING\")\n        console.log(audiocard.attributes)\n        //load sound if not played before\n        if(audiocard.attributes.sound_url && !state.sound){\n            const getSound = new Pizzicato.Sound({\n                source: 'file',\n                options: {path: audiocard.attributes.sound_url}\n            }, () => {\n                getSound.play()\n                setState(prevState => ({...prevState, sound: getSound, playing: true}))\n            })\n            getSound.on('end', () => {\n                console.log(\"ENDING\")\n                setState(prevState => ({...prevState, playCount: prevState.playCount + 1}))\n            })\n            return\n        }\n        //if resuming play (don't incrementing playCount)\n        console.log(state.sound.sourceNode.context.currentTime)\n        console.log(state.sound.sourceNode.buffer.duration)\n        if(!state.playing && state.sound && state.paused){\n            state.sound.play()\n            setState({...state, playing: true})\n        }\n        //if playing again, increment playCount\n        if(!state.playing && state.sound && !state.paused){\n            state.sound.play()\n            setState(prevState => ({...prevState, playing: true}))\n        }\n    }\n\n    // Notes: play pause play \n                // play stop play\n\n    const pauseSound = () => {\n        console.log(\"PAUSING\")\n        if(state.playing){\n            setState({...state, playing: false, paused: true})\n            state.sound.pause()\n            console.log(state)\n        }\n    }\n\n    const handleLoop = () => {\n        console.log(\"LOOPING\")\n        state.sound.stop()\n        state.sound.loop ? state.sound.loop = false : state.sound.loop = true\n        setState(prevState => ({...prevState, loop: state.sound.loop}))\n        if(state.sound.playing){\n            state.sound.play()\n            state.sound.onended = () => {\n                console.log(\"ENDING LOOP\")\n                setState(prevState => ({...prevState, playCount: prevState.playCount + 1}))\n            }\n        }\n    }\n\n    const tags = JSON.parse(audiocard.attributes.tags)\n\n    const getTags = tags.map((tag, index) => \n        <Tags tag={tag} key={index} />\n    )\n\n    const handleDeleteClick = e => {\n        confirmDelete(audiocard.id)\n        deleteAudiocard(audiocard.id)\n        setModal(false)\n    }\n\n    const addColor = category => {\n        switch(category){\n            case \"quotes\":\n                return \"#AECBDF\"\n            case \"music\":\n                return \"#B75FD6\"\n            case \"nature\":\n                return \"#AEDFC1\"\n            case \"personal\":\n                return \"#DFB3AE\"\n            case \"joke\":\n                return \"#C99EDB\"\n            case \"health\":\n                return \"#DA9333\"\n            default:\n                return \"#AEDFD5\"\n        }\n    }\n\n    const addIcon = category => {\n        switch(category){\n            case \"quotes\":\n                return \"comment alternate\"\n            case \"music\":\n                return \"music\"\n            case \"nature\":\n                return \"leaf\"\n            case \"personal\":\n                return \"user secret\"\n            case \"joke\":\n                return \"smile\"\n            case \"health\":\n                return \"hand spock\"\n            default:\n                return \"find\"\n        }\n    }\n\n\n    const modifyCardContent = id => {\n        let oldHeader = audiocard.attributes.soundster\n        let modifyCard = document.querySelector(`div.header.header-${id}`)\n            modifyCard.setAttribute('contenteditable', 'true')\n        let newHeader = modifyCard.innerHTML\n\n        if(oldHeader !== newHeader){\n            audiocard.attributes.soundster = newHeader\n            confirmEdit(audiocard)\n            editAudiocard(audiocard)\n        }\n    }\n\n    const addFavorite = audiocard => {\n        let getIcon = document.querySelector(`a.ui.left.corner.label.icon-${audiocard.id}`).firstElementChild\n        !getIcon.className.includes('pink') ? getIcon.className = 'pink bullhorn icon' : getIcon.className = 'bullhorn icon'\n        if(getIcon.className.includes('pink')){\n            audiocard.attributes.favorite = true\n            favoriteAudiocard(audiocard)\n            confirmFavorite(audiocard)\n        }else{\n            audiocard.attributes.favorite = false\n            favoriteAudiocard(audiocard)\n            confirmFavorite(audiocard)\n        }\n    }\n   \n        return (\n                <Card color=\"olive\">\n                    <Icon.Group size='huge'>\n                        <Image \n                            fluid\n                            src={audiocard.attributes.image} \n                            label={{ \n                                as: 'a', \n                                corner: 'left',\n                                className: `icon-${audiocard.id}`,\n                                icon: audiocard.attributes.favorite ? \"pink bullhorn\" : \"bullhorn\",\n                                onClick: e => addFavorite(audiocard)\n                            }}\n                        />\n                        <Icon \n                            corner='bottom right' \n                            inverted\n                            style={{color:addColor(audiocard.attributes.category)}} \n                            name={addIcon(audiocard.attributes.category)} \n                            size='large'\n                            id='category-icon'\n                        />\n                        <Icon>\n                            <Playcontroller \n                                playOrPause={state.playing ? pauseSound : playSound} \n                                sound={state.sound} \n                                playing={state.playing} \n                                playCount={state.playCount} \n                                id={audiocard.id}\n                                loop={state.loop}\n                                handleLoop={state.sound ? handleLoop : null}\n                            />\n                        </Icon>\n                    </Icon.Group>\n                    <Card.Content>\n                        <Card.Header \n                            className={`header-${audiocard.id}`} \n                            onClick={e => modifyCardContent(audiocard.id)}>{audiocard.attributes.soundster}\n                        </Card.Header>\n                        <Card.Meta>\n                            <span className='date'>Created on {newDate}</span>\n                        </Card.Meta>\n                    </Card.Content>\n                    <div className='icon-container'>\n                        <Card.Content extra>\n                            <Grid>\n                                <Grid.Row column={2} className='tag-button-container'>\n                                    {getTags}\n                                </Grid.Row>\n                            </Grid>\n                        </Card.Content>\n                    </div>\n                    <Label corner='right' \n                        color='yellow' \n                    >\n                        <Modal \n                            dimmer\n                            trigger={<Icon name=\"times circle\" className='deleteIcon' onClick={e => setModal(true)}/>} \n                            open={modalState}\n                        >\n                            <Header />\n                            <Modal.Content>\n                                <p>\n                                    <Icon name=\"trash alternate outline\" color=\"olive\" /> \n                                    Are you sure you want to delete?\n                                </p>\n                            </Modal.Content>\n                            <Modal.Actions>\n                                <Button id='delete-button' color='green' inverted onClick={e => handleDeleteClick()}>\n                                    <Icon name='checkmark' /> Yes\n                                </Button>\n                                <Button id='delete-button' color='red' inverted onClick={e => setModal(false)}>\n                                    <Icon name='checkmark'/> No\n                                </Button>\n                            </Modal.Actions>\n                        </Modal>\n                    </Label>\n                </Card>\n        )\n}\n\n\nexport default connect(null, {confirmDelete, deleteAudiocard, editAudiocard, confirmEdit, favoriteAudiocard, confirmFavorite})(Audiocard)\n"]},"metadata":{},"sourceType":"module"}