{"ast":null,"code":"import _objectSpread from\"/Users/skout/Desktop/Auditi/auditi_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/skout/Desktop/Auditi/auditi_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Image,Card,Grid,Icon,Label,Button,Modal,Header}from'semantic-ui-react';import{connect}from'react-redux';import React,{useState}from'react';import Tags from'./Tags';import Pizzicato from'pizzicato';import Playcontroller from'./Playcontroller.js';import{confirmDelete,deleteAudiocard,editAudiocard,confirmEdit,favoriteAudiocard,confirmFavorite}from'../actions/myAudioCards';var Audiocard=function Audiocard(_ref){var audiocard=_ref.audiocard,confirmDelete=_ref.confirmDelete,deleteAudiocard=_ref.deleteAudiocard,editAudiocard=_ref.editAudiocard,confirmEdit=_ref.confirmEdit,favoriteAudiocard=_ref.favoriteAudiocard,confirmFavorite=_ref.confirmFavorite;var _useState=useState({modalState:false,sound:null,playing:false,paused:false,playCount:0}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modalState=_useState4[0],setModal=_useState4[1];var newDate='';if(audiocard.attributes.created_at){var convertDate=audiocard.attributes.created_at.split('T')[0].split('-');newDate=new Date(convertDate).toDateString();}//play on click\nvar playSound=function playSound(){console.log(\"PLAYING RECORDING\");console.log(audiocard.attributes);if(audiocard.attributes.sound_url&&!state.sound){var getSound=new Pizzicato.Sound({source:'file',options:{path:audiocard.attributes.sound_url}},function(){getSound.play();setState(function(prevState){return _objectSpread({},prevState,{sound:getSound,playing:true,playCount:prevState.playCount+1});});});getSound.on('end',function(){setState(function(prevState){return _objectSpread({},prevState,{playing:false,paused:false});});});return;}//if resuming play (not incrementing playCount)\nconsole.log(state.sound);console.log(state.sound.sourceNode.buffer.duration);if(!state.playing&&state.sound&&state.paused){state.sound.play();setState(_objectSpread({},state,{playing:true}));}//if playing again, increment playCount\nif(!state.playing&&state.sound&&!state.paused){state.sound.play();setState(function(prevState){return _objectSpread({},prevState,{playing:true,playCount:prevState.playCount+1});});}};// Notes: play pause play \n// play stop play\nvar pauseSound=function pauseSound(){console.log(\"PAUSING\");if(state.playing){setState(_objectSpread({},state,{playing:false,paused:true}));state.sound.pause();}};var stopSound=function stopSound(){console.log(\"STOPPING\");// if(state.playing && state.sound)\n};var tags=JSON.parse(audiocard.attributes.tags);var getTags=tags.map(function(tag,index){return/*#__PURE__*/React.createElement(Tags,{tag:tag,key:index});});var handleDeleteClick=function handleDeleteClick(e){confirmDelete(audiocard.id);deleteAudiocard(audiocard.id);setModal(false);};var addColor=function addColor(category){switch(category){case\"quotes\":return\"#AECBDF\";case\"music\":return\"#B75FD6\";case\"nature\":return\"#AEDFC1\";case\"personal\":return\"#DFB3AE\";case\"joke\":return\"#C99EDB\";case\"health\":return\"#DA9333\";default:return\"#AEDFD5\";}};var addIcon=function addIcon(category){switch(category){case\"quotes\":return\"comment alternate\";case\"music\":return\"music\";case\"nature\":return\"leaf\";case\"personal\":return\"user secret\";case\"joke\":return\"smile\";case\"health\":return\"hand spock\";default:return\"find\";}};var modifyCardContent=function modifyCardContent(id){var oldHeader=audiocard.attributes.soundster;var modifyCard=document.querySelector(\"div.header.header-\".concat(id));modifyCard.setAttribute('contenteditable','true');var newHeader=modifyCard.innerHTML;if(oldHeader!==newHeader){audiocard.attributes.soundster=newHeader;confirmEdit(audiocard);editAudiocard(audiocard);}};var addFavorite=function addFavorite(audiocard){var getIcon=document.querySelector(\"a.ui.left.corner.label.icon-\".concat(audiocard.id)).firstElementChild;!getIcon.className.includes('pink')?getIcon.className='pink bullhorn icon':getIcon.className='bullhorn icon';if(getIcon.className.includes('pink')){audiocard.attributes.favorite=true;favoriteAudiocard(audiocard);confirmFavorite(audiocard);}else{audiocard.attributes.favorite=false;favoriteAudiocard(audiocard);confirmFavorite(audiocard);}};return/*#__PURE__*/React.createElement(Card,{color:\"olive\"},/*#__PURE__*/React.createElement(Icon.Group,{size:\"huge\"},/*#__PURE__*/React.createElement(Image,{fluid:true,src:audiocard.attributes.image,label:{as:'a',corner:'left',className:\"icon-\".concat(audiocard.id),icon:audiocard.attributes.favorite?\"pink bullhorn\":\"bullhorn\",onClick:function onClick(e){return addFavorite(audiocard);}}}),/*#__PURE__*/React.createElement(Icon,{corner:\"bottom right\",inverted:true,style:{color:addColor(audiocard.attributes.category)},name:addIcon(audiocard.attributes.category),size:\"large\",id:\"category-icon\"}),/*#__PURE__*/React.createElement(Icon,null,/*#__PURE__*/React.createElement(Playcontroller,{playOrPause:state.playing?pauseSound:playSound,playing:state.playing,playCount:state.playCount}))),/*#__PURE__*/React.createElement(Card.Content,null,/*#__PURE__*/React.createElement(Card.Header,{className:\"header-\".concat(audiocard.id),onClick:function onClick(e){return modifyCardContent(audiocard.id);}},audiocard.attributes.soundster),/*#__PURE__*/React.createElement(Card.Meta,null,/*#__PURE__*/React.createElement(\"span\",{className:\"date\"},\"Created on \",newDate))),/*#__PURE__*/React.createElement(\"div\",{className:\"icon-container\"},/*#__PURE__*/React.createElement(Card.Content,{extra:true},/*#__PURE__*/React.createElement(Grid,null,/*#__PURE__*/React.createElement(Grid.Row,{column:2,className:\"tag-button-container\"},getTags)))),/*#__PURE__*/React.createElement(Label,{corner:\"right\",color:\"yellow\"},/*#__PURE__*/React.createElement(Modal,{dimmer:true,trigger:/*#__PURE__*/React.createElement(Icon,{name:\"times circle\",className:\"deleteIcon\",onClick:function onClick(e){return setModal(true);}}),open:modalState},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Modal.Content,null,/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(Icon,{name:\"trash alternate outline\",color:\"olive\"}),\"Are you sure you want to delete?\")),/*#__PURE__*/React.createElement(Modal.Actions,null,/*#__PURE__*/React.createElement(Button,{id:\"delete-button\",color:\"green\",inverted:true,onClick:function onClick(e){return handleDeleteClick();}},/*#__PURE__*/React.createElement(Icon,{name:\"checkmark\"}),\" Yes\"),/*#__PURE__*/React.createElement(Button,{id:\"delete-button\",color:\"red\",inverted:true,onClick:function onClick(e){return setModal(false);}},/*#__PURE__*/React.createElement(Icon,{name:\"checkmark\"}),\" No\")))));};export default connect(null,{confirmDelete:confirmDelete,deleteAudiocard:deleteAudiocard,editAudiocard:editAudiocard,confirmEdit:confirmEdit,favoriteAudiocard:favoriteAudiocard,confirmFavorite:confirmFavorite})(Audiocard);","map":{"version":3,"sources":["/Users/skout/Desktop/Auditi/auditi_frontend/src/components/Audiocard.js"],"names":["Image","Card","Grid","Icon","Label","Button","Modal","Header","connect","React","useState","Tags","Pizzicato","Playcontroller","confirmDelete","deleteAudiocard","editAudiocard","confirmEdit","favoriteAudiocard","confirmFavorite","Audiocard","audiocard","modalState","sound","playing","paused","playCount","state","setState","setModal","newDate","attributes","created_at","convertDate","split","Date","toDateString","playSound","console","log","sound_url","getSound","Sound","source","options","path","play","prevState","on","sourceNode","buffer","duration","pauseSound","pause","stopSound","tags","JSON","parse","getTags","map","tag","index","handleDeleteClick","e","id","addColor","category","addIcon","modifyCardContent","oldHeader","soundster","modifyCard","document","querySelector","setAttribute","newHeader","innerHTML","addFavorite","getIcon","firstElementChild","className","includes","favorite","image","as","corner","icon","onClick","color"],"mappings":"2PAAA,OAASA,KAAT,CAAgBC,IAAhB,CAAsBC,IAAtB,CAA4BC,IAA5B,CAAkCC,KAAlC,CAAyCC,MAAzC,CAAiDC,KAAjD,CAAwDC,MAAxD,KAAsE,mBAAtE,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,WAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,qBAA3B,CACA,OAAQC,aAAR,CAAuBC,eAAvB,CAAwCC,aAAxC,CAAuDC,WAAvD,CAAoEC,iBAApE,CAAuFC,eAAvF,KAA6G,yBAA7G,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAiH,IAA/GC,CAAAA,SAA+G,MAA/GA,SAA+G,CAApGP,aAAoG,MAApGA,aAAoG,CAArFC,eAAqF,MAArFA,eAAqF,CAApEC,aAAoE,MAApEA,aAAoE,CAArDC,WAAqD,MAArDA,WAAqD,CAAxCC,iBAAwC,MAAxCA,iBAAwC,CAArBC,eAAqB,MAArBA,eAAqB,eAErGT,QAAQ,CAAC,CAC/BY,UAAU,CAAE,KADmB,CAE/BC,KAAK,CAAE,IAFwB,CAG/BC,OAAO,CAAE,KAHsB,CAI/BC,MAAM,CAAE,KAJuB,CAK/BC,SAAS,CAAE,CALoB,CAAD,CAF6F,wCAExHC,KAFwH,eAEjHC,QAFiH,8BAShGlB,QAAQ,CAAC,KAAD,CATwF,yCASxHY,UATwH,eAS5GO,QAT4G,eAW/H,GAAIC,CAAAA,OAAO,CAAG,EAAd,CACA,GAAIT,SAAS,CAACU,UAAV,CAAqBC,UAAzB,CAAoC,CAChC,GAAIC,CAAAA,WAAW,CAAGZ,SAAS,CAACU,UAAV,CAAqBC,UAArB,CAAgCE,KAAhC,CAAsC,GAAtC,EAA2C,CAA3C,EAA8CA,KAA9C,CAAoD,GAApD,CAAlB,CACAJ,OAAO,CAAG,GAAIK,CAAAA,IAAJ,CAASF,WAAT,EAAsBG,YAAtB,EAAV,CACH,CAED;AACA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpBC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACAD,OAAO,CAACC,GAAR,CAAYlB,SAAS,CAACU,UAAtB,EACA,GAAGV,SAAS,CAACU,UAAV,CAAqBS,SAArB,EAAkC,CAACb,KAAK,CAACJ,KAA5C,CAAkD,CAC9C,GAAMkB,CAAAA,QAAQ,CAAG,GAAI7B,CAAAA,SAAS,CAAC8B,KAAd,CAAoB,CACjCC,MAAM,CAAE,MADyB,CAEjCC,OAAO,CAAE,CAACC,IAAI,CAAExB,SAAS,CAACU,UAAV,CAAqBS,SAA5B,CAFwB,CAApB,CAGd,UAAM,CACLC,QAAQ,CAACK,IAAT,GACAlB,QAAQ,CAAC,SAAAmB,SAAS,0BAASA,SAAT,EAAoBxB,KAAK,CAAEkB,QAA3B,CAAqCjB,OAAO,CAAE,IAA9C,CAAoDE,SAAS,CAAEqB,SAAS,CAACrB,SAAV,CAAsB,CAArF,IAAV,CAAR,CACH,CANgB,CAAjB,CAOAe,QAAQ,CAACO,EAAT,CAAY,KAAZ,CAAmB,UAAM,CACrBpB,QAAQ,CAAC,SAAAmB,SAAS,0BAASA,SAAT,EAAoBvB,OAAO,CAAE,KAA7B,CAAoCC,MAAM,CAAE,KAA5C,IAAV,CAAR,CACH,CAFD,EAGA,OACH,CACD;AACAa,OAAO,CAACC,GAAR,CAAYZ,KAAK,CAACJ,KAAlB,EACAe,OAAO,CAACC,GAAR,CAAYZ,KAAK,CAACJ,KAAN,CAAY0B,UAAZ,CAAuBC,MAAvB,CAA8BC,QAA1C,EACA,GAAG,CAACxB,KAAK,CAACH,OAAP,EAAkBG,KAAK,CAACJ,KAAxB,EAAiCI,KAAK,CAACF,MAA1C,CAAiD,CAC7CE,KAAK,CAACJ,KAAN,CAAYuB,IAAZ,GACAlB,QAAQ,kBAAKD,KAAL,EAAYH,OAAO,CAAE,IAArB,GAAR,CACH,CACD;AACA,GAAG,CAACG,KAAK,CAACH,OAAP,EAAkBG,KAAK,CAACJ,KAAxB,EAAiC,CAACI,KAAK,CAACF,MAA3C,CAAkD,CAC9CE,KAAK,CAACJ,KAAN,CAAYuB,IAAZ,GACAlB,QAAQ,CAAC,SAAAmB,SAAS,0BAASA,SAAT,EAAoBvB,OAAO,CAAE,IAA7B,CAAmCE,SAAS,CAAEqB,SAAS,CAACrB,SAAV,CAAsB,CAApE,IAAV,CAAR,CACH,CACJ,CA5BD,CA8BA;AACY;AAEZ,GAAM0B,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrBd,OAAO,CAACC,GAAR,CAAY,SAAZ,EACA,GAAGZ,KAAK,CAACH,OAAT,CAAiB,CACbI,QAAQ,kBAAKD,KAAL,EAAYH,OAAO,CAAE,KAArB,CAA4BC,MAAM,CAAE,IAApC,GAAR,CACAE,KAAK,CAACJ,KAAN,CAAY8B,KAAZ,GACH,CACJ,CAND,CAQA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpBhB,OAAO,CAACC,GAAR,CAAY,UAAZ,EACA;AACH,CAHD,CAMA,GAAMgB,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWpC,SAAS,CAACU,UAAV,CAAqBwB,IAAhC,CAAb,CAEA,GAAMG,CAAAA,OAAO,CAAGH,IAAI,CAACI,GAAL,CAAS,SAACC,GAAD,CAAMC,KAAN,qBACrB,oBAAC,IAAD,EAAM,GAAG,CAAED,GAAX,CAAgB,GAAG,CAAEC,KAArB,EADqB,EAAT,CAAhB,CAIA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAAC,CAAC,CAAI,CAC3BjD,aAAa,CAACO,SAAS,CAAC2C,EAAX,CAAb,CACAjD,eAAe,CAACM,SAAS,CAAC2C,EAAX,CAAf,CACAnC,QAAQ,CAAC,KAAD,CAAR,CACH,CAJD,CAMA,GAAMoC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,QAAQ,CAAI,CACzB,OAAOA,QAAP,EACI,IAAK,QAAL,CACI,MAAO,SAAP,CACJ,IAAK,OAAL,CACI,MAAO,SAAP,CACJ,IAAK,QAAL,CACI,MAAO,SAAP,CACJ,IAAK,UAAL,CACI,MAAO,SAAP,CACJ,IAAK,MAAL,CACI,MAAO,SAAP,CACJ,IAAK,QAAL,CACI,MAAO,SAAP,CACJ,QACI,MAAO,SAAP,CAdR,CAgBH,CAjBD,CAmBA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAAD,QAAQ,CAAI,CACxB,OAAOA,QAAP,EACI,IAAK,QAAL,CACI,MAAO,mBAAP,CACJ,IAAK,OAAL,CACI,MAAO,OAAP,CACJ,IAAK,QAAL,CACI,MAAO,MAAP,CACJ,IAAK,UAAL,CACI,MAAO,aAAP,CACJ,IAAK,MAAL,CACI,MAAO,OAAP,CACJ,IAAK,QAAL,CACI,MAAO,YAAP,CACJ,QACI,MAAO,MAAP,CAdR,CAgBH,CAjBD,CAoBA,GAAME,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAAJ,EAAE,CAAI,CAC5B,GAAIK,CAAAA,SAAS,CAAGhD,SAAS,CAACU,UAAV,CAAqBuC,SAArC,CACA,GAAIC,CAAAA,UAAU,CAAGC,QAAQ,CAACC,aAAT,6BAA4CT,EAA5C,EAAjB,CACIO,UAAU,CAACG,YAAX,CAAwB,iBAAxB,CAA2C,MAA3C,EACJ,GAAIC,CAAAA,SAAS,CAAGJ,UAAU,CAACK,SAA3B,CAEA,GAAGP,SAAS,GAAKM,SAAjB,CAA2B,CACvBtD,SAAS,CAACU,UAAV,CAAqBuC,SAArB,CAAiCK,SAAjC,CACA1D,WAAW,CAACI,SAAD,CAAX,CACAL,aAAa,CAACK,SAAD,CAAb,CACH,CACJ,CAXD,CAaA,GAAMwD,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAxD,SAAS,CAAI,CAC7B,GAAIyD,CAAAA,OAAO,CAAGN,QAAQ,CAACC,aAAT,uCAAsDpD,SAAS,CAAC2C,EAAhE,GAAsEe,iBAApF,CACA,CAACD,OAAO,CAACE,SAAR,CAAkBC,QAAlB,CAA2B,MAA3B,CAAD,CAAsCH,OAAO,CAACE,SAAR,CAAoB,oBAA1D,CAAiFF,OAAO,CAACE,SAAR,CAAoB,eAArG,CACA,GAAGF,OAAO,CAACE,SAAR,CAAkBC,QAAlB,CAA2B,MAA3B,CAAH,CAAsC,CAClC5D,SAAS,CAACU,UAAV,CAAqBmD,QAArB,CAAgC,IAAhC,CACAhE,iBAAiB,CAACG,SAAD,CAAjB,CACAF,eAAe,CAACE,SAAD,CAAf,CACH,CAJD,IAIK,CACDA,SAAS,CAACU,UAAV,CAAqBmD,QAArB,CAAgC,KAAhC,CACAhE,iBAAiB,CAACG,SAAD,CAAjB,CACAF,eAAe,CAACE,SAAD,CAAf,CACH,CACJ,CAZD,CAcI,mBACQ,oBAAC,IAAD,EAAM,KAAK,CAAC,OAAZ,eACI,oBAAC,IAAD,CAAM,KAAN,EAAY,IAAI,CAAC,MAAjB,eACI,oBAAC,KAAD,EACI,KAAK,KADT,CAEI,GAAG,CAAEA,SAAS,CAACU,UAAV,CAAqBoD,KAF9B,CAGI,KAAK,CAAE,CACHC,EAAE,CAAE,GADD,CAEHC,MAAM,CAAE,MAFL,CAGHL,SAAS,gBAAU3D,SAAS,CAAC2C,EAApB,CAHN,CAIHsB,IAAI,CAAEjE,SAAS,CAACU,UAAV,CAAqBmD,QAArB,CAAgC,eAAhC,CAAkD,UAJrD,CAKHK,OAAO,CAAE,iBAAAxB,CAAC,QAAIc,CAAAA,WAAW,CAACxD,SAAD,CAAf,EALP,CAHX,EADJ,cAYI,oBAAC,IAAD,EACI,MAAM,CAAC,cADX,CAEI,QAAQ,KAFZ,CAGI,KAAK,CAAE,CAACmE,KAAK,CAACvB,QAAQ,CAAC5C,SAAS,CAACU,UAAV,CAAqBmC,QAAtB,CAAf,CAHX,CAII,IAAI,CAAEC,OAAO,CAAC9C,SAAS,CAACU,UAAV,CAAqBmC,QAAtB,CAJjB,CAKI,IAAI,CAAC,OALT,CAMI,EAAE,CAAC,eANP,EAZJ,cAoBI,oBAAC,IAAD,mBACI,oBAAC,cAAD,EAAgB,WAAW,CAAEvC,KAAK,CAACH,OAAN,CAAgB4B,UAAhB,CAA6Bf,SAA1D,CAAqE,OAAO,CAAEV,KAAK,CAACH,OAApF,CAA6F,SAAS,CAAEG,KAAK,CAACD,SAA9G,EADJ,CApBJ,CADJ,cAyBI,oBAAC,IAAD,CAAM,OAAN,mBACI,oBAAC,IAAD,CAAM,MAAN,EACI,SAAS,kBAAYL,SAAS,CAAC2C,EAAtB,CADb,CAEI,OAAO,CAAE,iBAAAD,CAAC,QAAIK,CAAAA,iBAAiB,CAAC/C,SAAS,CAAC2C,EAAX,CAArB,EAFd,EAEoD3C,SAAS,CAACU,UAAV,CAAqBuC,SAFzE,CADJ,cAKI,oBAAC,IAAD,CAAM,IAAN,mBACI,4BAAM,SAAS,CAAC,MAAhB,gBAAmCxC,OAAnC,CADJ,CALJ,CAzBJ,cAkCI,2BAAK,SAAS,CAAC,gBAAf,eACI,oBAAC,IAAD,CAAM,OAAN,EAAc,KAAK,KAAnB,eACI,oBAAC,IAAD,mBACI,oBAAC,IAAD,CAAM,GAAN,EAAU,MAAM,CAAE,CAAlB,CAAqB,SAAS,CAAC,sBAA/B,EACK4B,OADL,CADJ,CADJ,CADJ,CAlCJ,cA2CI,oBAAC,KAAD,EAAO,MAAM,CAAC,OAAd,CACI,KAAK,CAAC,QADV,eAGI,oBAAC,KAAD,EACI,MAAM,KADV,CAEI,OAAO,cAAE,oBAAC,IAAD,EAAM,IAAI,CAAC,cAAX,CAA0B,SAAS,CAAC,YAApC,CAAiD,OAAO,CAAE,iBAAAK,CAAC,QAAIlC,CAAAA,QAAQ,CAAC,IAAD,CAAZ,EAA3D,EAFb,CAGI,IAAI,CAAEP,UAHV,eAKI,oBAAC,MAAD,MALJ,cAMI,oBAAC,KAAD,CAAO,OAAP,mBACI,0CACI,oBAAC,IAAD,EAAM,IAAI,CAAC,yBAAX,CAAqC,KAAK,CAAC,OAA3C,EADJ,oCADJ,CANJ,cAYI,oBAAC,KAAD,CAAO,OAAP,mBACI,oBAAC,MAAD,EAAQ,EAAE,CAAC,eAAX,CAA2B,KAAK,CAAC,OAAjC,CAAyC,QAAQ,KAAjD,CAAkD,OAAO,CAAE,iBAAAyC,CAAC,QAAID,CAAAA,iBAAiB,EAArB,EAA5D,eACI,oBAAC,IAAD,EAAM,IAAI,CAAC,WAAX,EADJ,QADJ,cAII,oBAAC,MAAD,EAAQ,EAAE,CAAC,eAAX,CAA2B,KAAK,CAAC,KAAjC,CAAuC,QAAQ,KAA/C,CAAgD,OAAO,CAAE,iBAAAC,CAAC,QAAIlC,CAAAA,QAAQ,CAAC,KAAD,CAAZ,EAA1D,eACI,oBAAC,IAAD,EAAM,IAAI,CAAC,WAAX,EADJ,OAJJ,CAZJ,CAHJ,CA3CJ,CADR,CAuEP,CAtND,CAyNA,cAAerB,CAAAA,OAAO,CAAC,IAAD,CAAO,CAACM,aAAa,CAAbA,aAAD,CAAgBC,eAAe,CAAfA,eAAhB,CAAiCC,aAAa,CAAbA,aAAjC,CAAgDC,WAAW,CAAXA,WAAhD,CAA6DC,iBAAiB,CAAjBA,iBAA7D,CAAgFC,eAAe,CAAfA,eAAhF,CAAP,CAAP,CAAgHC,SAAhH,CAAf","sourcesContent":["import { Image, Card, Grid, Icon, Label, Button, Modal, Header } from 'semantic-ui-react';\nimport { connect } from 'react-redux'\nimport React, {useState} from 'react'\nimport Tags from './Tags'\nimport Pizzicato from 'pizzicato'\nimport Playcontroller from './Playcontroller.js'\nimport {confirmDelete, deleteAudiocard, editAudiocard, confirmEdit, favoriteAudiocard, confirmFavorite} from '../actions/myAudioCards'\n\nconst Audiocard = ({audiocard, confirmDelete, deleteAudiocard, editAudiocard, confirmEdit, favoriteAudiocard, confirmFavorite}) => {\n    \n    const [state, setState] = useState({\n        modalState: false,\n        sound: null,\n        playing: false,\n        paused: false,\n        playCount: 0\n    })\n    const [modalState, setModal] = useState(false)\n\n    let newDate = ''\n    if (audiocard.attributes.created_at){\n        let convertDate = audiocard.attributes.created_at.split('T')[0].split('-')\n        newDate = new Date(convertDate).toDateString()\n    }\n\n    //play on click\n    const playSound = () => {\n        console.log(\"PLAYING RECORDING\")\n        console.log(audiocard.attributes)\n        if(audiocard.attributes.sound_url && !state.sound){\n            const getSound = new Pizzicato.Sound({\n                source: 'file',\n                options: {path: audiocard.attributes.sound_url}\n            }, () => {\n                getSound.play()\n                setState(prevState => ({...prevState, sound: getSound, playing: true, playCount: prevState.playCount + 1}))\n            })\n            getSound.on('end', () => {\n                setState(prevState => ({...prevState, playing: false, paused: false}))\n            })\n            return\n        }\n        //if resuming play (not incrementing playCount)\n        console.log(state.sound)\n        console.log(state.sound.sourceNode.buffer.duration)\n        if(!state.playing && state.sound && state.paused){\n            state.sound.play()\n            setState({...state, playing: true})\n        }\n        //if playing again, increment playCount\n        if(!state.playing && state.sound && !state.paused){\n            state.sound.play()\n            setState(prevState => ({...prevState, playing: true, playCount: prevState.playCount + 1}))\n        }\n    }\n\n    // Notes: play pause play \n                // play stop play\n\n    const pauseSound = () => {\n        console.log(\"PAUSING\")\n        if(state.playing){\n            setState({...state, playing: false, paused: true})\n            state.sound.pause()\n        }\n    }\n\n    const stopSound = () => {\n        console.log(\"STOPPING\")\n        // if(state.playing && state.sound)\n    }\n\n\n    const tags = JSON.parse(audiocard.attributes.tags)\n\n    const getTags = tags.map((tag, index) => \n        <Tags tag={tag} key={index} />\n    )\n\n    const handleDeleteClick = e => {\n        confirmDelete(audiocard.id)\n        deleteAudiocard(audiocard.id)\n        setModal(false)\n    }\n\n    const addColor = category => {\n        switch(category){\n            case \"quotes\":\n                return \"#AECBDF\"\n            case \"music\":\n                return \"#B75FD6\"\n            case \"nature\":\n                return \"#AEDFC1\"\n            case \"personal\":\n                return \"#DFB3AE\"\n            case \"joke\":\n                return \"#C99EDB\"\n            case \"health\":\n                return \"#DA9333\"\n            default:\n                return \"#AEDFD5\"\n        }\n    }\n\n    const addIcon = category => {\n        switch(category){\n            case \"quotes\":\n                return \"comment alternate\"\n            case \"music\":\n                return \"music\"\n            case \"nature\":\n                return \"leaf\"\n            case \"personal\":\n                return \"user secret\"\n            case \"joke\":\n                return \"smile\"\n            case \"health\":\n                return \"hand spock\"\n            default:\n                return \"find\"\n        }\n    }\n\n\n    const modifyCardContent = id => {\n        let oldHeader = audiocard.attributes.soundster\n        let modifyCard = document.querySelector(`div.header.header-${id}`)\n            modifyCard.setAttribute('contenteditable', 'true')\n        let newHeader = modifyCard.innerHTML\n\n        if(oldHeader !== newHeader){\n            audiocard.attributes.soundster = newHeader\n            confirmEdit(audiocard)\n            editAudiocard(audiocard)\n        }\n    }\n\n    const addFavorite = audiocard => {\n        let getIcon = document.querySelector(`a.ui.left.corner.label.icon-${audiocard.id}`).firstElementChild\n        !getIcon.className.includes('pink') ? getIcon.className = 'pink bullhorn icon' : getIcon.className = 'bullhorn icon'\n        if(getIcon.className.includes('pink')){\n            audiocard.attributes.favorite = true\n            favoriteAudiocard(audiocard)\n            confirmFavorite(audiocard)\n        }else{\n            audiocard.attributes.favorite = false\n            favoriteAudiocard(audiocard)\n            confirmFavorite(audiocard)\n        }\n    }\n   \n        return (\n                <Card color=\"olive\">\n                    <Icon.Group size='huge'>\n                        <Image \n                            fluid\n                            src={audiocard.attributes.image} \n                            label={{ \n                                as: 'a', \n                                corner: 'left',\n                                className: `icon-${audiocard.id}`,\n                                icon: audiocard.attributes.favorite ? \"pink bullhorn\" : \"bullhorn\",\n                                onClick: e => addFavorite(audiocard)\n                            }}\n                        />\n                        <Icon \n                            corner='bottom right' \n                            inverted\n                            style={{color:addColor(audiocard.attributes.category)}} \n                            name={addIcon(audiocard.attributes.category)} \n                            size='large'\n                            id='category-icon'\n                        />\n                        <Icon>\n                            <Playcontroller playOrPause={state.playing ? pauseSound : playSound} playing={state.playing} playCount={state.playCount}/>\n                        </Icon>\n                    </Icon.Group>\n                    <Card.Content>\n                        <Card.Header \n                            className={`header-${audiocard.id}`} \n                            onClick={e => modifyCardContent(audiocard.id)}>{audiocard.attributes.soundster}\n                        </Card.Header>\n                        <Card.Meta>\n                            <span className='date'>Created on {newDate}</span>\n                        </Card.Meta>\n                    </Card.Content>\n                    <div className='icon-container'>\n                        <Card.Content extra>\n                            <Grid>\n                                <Grid.Row column={2} className='tag-button-container'>\n                                    {getTags}\n                                </Grid.Row>\n                            </Grid>\n                        </Card.Content>\n                    </div>\n                    <Label corner='right' \n                        color='yellow' \n                    >\n                        <Modal \n                            dimmer\n                            trigger={<Icon name=\"times circle\" className='deleteIcon' onClick={e => setModal(true)}/>} \n                            open={modalState}\n                        >\n                            <Header />\n                            <Modal.Content>\n                                <p>\n                                    <Icon name=\"trash alternate outline\" color=\"olive\" /> \n                                    Are you sure you want to delete?\n                                </p>\n                            </Modal.Content>\n                            <Modal.Actions>\n                                <Button id='delete-button' color='green' inverted onClick={e => handleDeleteClick()}>\n                                    <Icon name='checkmark' /> Yes\n                                </Button>\n                                <Button id='delete-button' color='red' inverted onClick={e => setModal(false)}>\n                                    <Icon name='checkmark'/> No\n                                </Button>\n                            </Modal.Actions>\n                        </Modal>\n                    </Label>\n                </Card>\n        )\n}\n\n\nexport default connect(null, {confirmDelete, deleteAudiocard, editAudiocard, confirmEdit, favoriteAudiocard, confirmFavorite})(Audiocard)\n"]},"metadata":{},"sourceType":"module"}